---
id: Downloader
title: Downloader
sidebar_label: Downloader
slug: /apis/components/downloader/Downloader
description: Purely Python-Dash implemented downloader component.
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import useBaseUrl from "@docusaurus/useBaseUrl";
import IconExternalLink from "@theme/Icon/ExternalLink";

import vsiCheckIcon from "@iconify-icons/codicon/check";
import vsiTerminalIcon from "@iconify-icons/codicon/terminal";

import DarkButton from "@site/src/components/DarkButton";
import InlineIcon from "@site/src/components/InlineIcon";
import APITopBar, {IconObjType} from "@site/src/components/APITopBar";

<APITopBar type="class" source="components.downloader.Downloader" />

```python
downloader = Downloader(
    id: str
    to_addr: Callable[[str], str] | None
)
```

Purely Python-Dash implemented downloader component.

This component is purely implemented by python codes.

## Aliases

This class can be acquired by

```python
import dash_file_cache as dfc


dfc.Downloader
dfc.components.Downloader
dfc.components.downloader.Downloader
```

## Arguments

| Argument  |              Type              |             Required              | <center>Description</center>                                                                                                                                                                                                                                                                                 |
| :-------: | :----------------------------: | :-------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|   `id`    |             `str`              | <InlineIcon icon={vsiCheckIcon}/> | The basic id of this component.                                                                                                                                                                                                                                                                              |
| `to_addr` | `Callable[[str], str] \| None` |                                   | <p>An optional pre-processing function which converts the trigger from the callback to the address used for downloading the file.</p><p>If not provided, will use the trigger value directly (equivalent to `lambda x: x`).</p><p>If returning an empty string, the downloading event will be prevented.</p> |

## Methods

### <IconObjType type="method"/> `layout`

```python
layout: html.Div = downloader.layout()
```

Get the layout of this component.

#### Returns

| Argument |    Type    | <center>Description</center>   |
| :------: | :--------: | :----------------------------- |
| `layout` | `html.Div` | The layout of this downloader. |

---

### <IconObjType type="method"/> `use_callbacks`

```python
downloader.use_callbacks(app: dash.Dash)
```

Use callbacks.

Bind the automatically generated callbacks used by this components to the given `app`.

#### Requires

| Argument |  Type  |             Required              | <center>Description</center> |
| :------: | :----: | :-------------------------------: | ---------------------------- |
|  `app`   | `Dash` | <InlineIcon icon={vsiCheckIcon}/> | The dash application.        |

## Properties

### <IconObjType type="param"/> `as_input`

```python
cbk_input: dash.Input = downloader.as_input
```

Provide the trigger as the callback input. This input should be
triggered when the address of the downloadable file is prepared.

---

### <IconObjType type="param"/> `as_output`

```python
cbk_output: dash.Output = downloader.as_output
```

Provide the trigger as the callback output.

---

### <IconObjType type="param"/> `as_state`

```python
cbk_state: dash.State = downloader.as_state
```

Provide the trigger as the callback state. This input should be
triggered when the address of the downloadable file is prepared.

## Examples

### <IconObjType type="term"/> Minimal example

<Tabs
  defaultValue="codes"
  values={[
    { label: 'Codes', value: 'codes', },
    { label: 'Results', value: 'results', },
  ]
}>

<TabItem value="codes">

```python title="minimal_example_downloader.py" showLineNumbers
from typing import Optional
import dash
import flask
from dash import html, Input
from dash_file_cache.services.utilities import get_server
from dash_file_cache.components.downloader import Downloader


app = dash.Dash("demo")
server = get_server(app)

downloader = Downloader(id="downloader", to_addr=None)

app.layout = html.Div((html.Button(id="btn", children="Download"), downloader.layout()))

downloader.use_callbacks(app)


@server.route("/file")
def file():
    resp = flask.Response("test file content", status=200, mimetype="text/plain")
    resp.headers["Content-Disposition"] = "attachment; filename=test.txt"
    return resp


@app.callback(downloader.as_output, Input("btn", "n_clicks"))
def trigger_get_file(n_clicks: Optional[int]):
    if not n_clicks:
        return dash.no_update
    return "/file"


if __name__ == "__main__":
    app.run()
```

</TabItem>

<TabItem value="results">

An application with a downloading button will be rendered.

By clicking the button, a file named `text.txt` will be downloaded, the file content is

```
test file content
```

</TabItem>

</Tabs>

### <IconObjType type="term"/> Download a file with a background callback

See

<p>
  <DarkButton
    to={useBaseUrl("/docs/examples/download-file")}
    icon={vsiTerminalIcon}
  >
    {"Download file"}
  </DarkButton>
</p>
